<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Vanilla - La Tentación Empieza Aquí</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>

<style>
    body { font-family: 'Inter', sans-serif; background: url('Mooreclub1.jpeg') center top no-repeat; background-size: cover; background-attachment: fixed; color: white; }
    .bg-overlay { background-color: rgba(0, 0, 0, 0.85); }
    .btn { background-color: #6b21a8; color: white; padding: 0.5rem 1rem; border-radius: 0.375rem; font-weight: 600; cursor: pointer; transition: background-color 0.3s; margin-right: 0.5rem; }
    .btn:hover { background-color: #5b189b; }
    .btn:disabled { background-color: #3b0764; cursor: not-allowed; }
    
    #anuncio-panel-lateral { 
        position: fixed; 
        top: 100px; 
        left: 20px; 
        width: 320px; 
        max-height: 80vh;
        background-color: rgba(18, 9, 31, 0.85);
        backdrop-filter: blur(8px);
        border: 1px solid #6b21a8;
        border-radius: 10px;
        padding: 1.5rem;
        z-index: 9998; 
        font-weight: bold; 
        box-shadow: 4px 4px 20px rgba(0,0,0,0.6); 
        transform: translateX(-120%);
        transition: transform 0.4s ease-in-out;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
    }
    #anuncio-panel-lateral.visible {
        transform: translateX(0);
    }
    #anuncio-cerrar { font-size: 1.5rem; cursor: pointer; background: none; border: none; color: white; position: absolute; top: 10px; right: 15px; }
    .votacion-btn { background-color: rgba(107, 33, 168, 0.5); border: 1px solid #a855f7; border-radius: 8px; padding: 0.5rem; margin-top: 0.5rem; width: 48%; font-size: 1rem; transition: background-color 0.2s; }
    .votacion-btn:hover:not(:disabled) { background-color: rgba(107, 33, 168, 0.8); }
    .votacion-btn:disabled { opacity: 0.6; cursor: not-allowed; background-color: #3b0764; }

    .producto-card img, .producto-card svg { border-radius: 0.5rem; height: 96px; width: 96px; object-fit: cover; margin: auto; }
    #contenido { min-height: 60vh; }
    .panel-image { width: 100%; height: 100%; max-height: 200px; object-fit: contain; }
    .status-indicator { width: 20px; height: 20px; border-radius: 50%; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
    .status-indicator:hover { transform: scale(1.1); }
    .status-indicator.active { box-shadow: 0 0 0 3px white; }
    .habitacion-img { width: 100%; height: 120px; object-fit: cover; border-radius: 0.375rem; }
    .inventory-upload-box { width: 100%; height: 180px; background-color: rgba(0,0,0,0.2); border: 2px dashed #5b189b; border-radius: 0.5rem; display: flex; justify-content: center; align-items: center; cursor: pointer; position: relative; overflow: hidden; }
    .inventory-upload-box:hover { background-color: rgba(0,0,0,0.4); }
    .inventory-upload-box img { width: 100%; height: 100%; object-fit: cover; }
    .inventory-upload-box .remove-btn { position: absolute; top: 5px; right: 5px; background-color: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 24px; height: 24px; font-weight: bold; line-height: 24px; text-align: center; cursor: pointer; display: none; }
    .inventory-upload-box.has-image .remove-btn { display: block; }
    .inventory-upload-box.has-image .placeholder-text { display: none; }
    #chatbot-button-wrapper { position: fixed; bottom: 40px; right: 40px; z-index: 1000; }
    #chatbot-button { width: 140px; height: 140px; border-radius: 50%; overflow: hidden; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4); cursor: pointer; transition: transform 0.3s ease; animation: pulse-small 2s infinite; }
    #chatbot-button:hover { transform: scale(1.05); }
    #chatbot-button img { width: 100%; height: 100%; object-fit: contain; z-index: 1001; position: relative; }
    @keyframes pulse-small{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
    #chatbot-bubble{position:absolute;bottom:150px;right:0;background-color:#a855f7;color:#fff;padding:12px 18px;border-radius:20px;border-bottom-right-radius:2px;box-shadow:0 4px 8px rgba(0,0,0,.3);white-space:nowrap;font-weight:600;cursor:pointer;opacity:0;visibility:hidden;transform:translateY(20px);transition:opacity .4s ease,transform .4s ease}#chatbot-bubble.visible{opacity:1;visibility:visible;transform:translateY(0)}
    #chatbot-container{position:fixed;bottom:40px;right:40px;width:450px;height:600px;background-color:#1a1a2e;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,.5);display:none;flex-direction:column;z-index:999;overflow:hidden;border:2px solid #6b21a8;box-sizing:border-box}#chatbot-header{background-color:#6b21a8;color:#fff;padding:10px 15px;font-weight:700;display:flex;justify-content:space-between;align-items:center;flex-shrink:0;box-sizing:border-box;width:100%}#chatbot-close,#chatbot-minimize{background:0 0;border:none;color:#fff;font-size:1.2em;cursor:pointer;margin-left:10px;padding:0;line-height:1}
    #chatbot-messages{flex-grow:1;padding:15px;overflow-y:auto;background-color:#2a2a4a;display:flex;flex-direction:column;min-height:0;box-sizing:border-box; background-image: url('Luna.png'); background-repeat: no-repeat; background-position: bottom 10px right 10px; background-size: 120px; background-blend-mode: luminosity; opacity: 0.8;}
    .chat-message{margin-bottom:10px;padding:8px 12px;border-radius:15px;max-width:80%;line-height:1.4;word-wrap:break-word;box-sizing:border-box; position: relative; z-index: 2;}.user-message{background-color:#a855f7;align-self:flex-end;border-bottom-right-radius:2px}.bot-message{background-color:#4a4a6e;align-self:flex-start;border-bottom-left-radius:2px}#chatbot-input-container{padding:10px 15px;display:flex;align-items:center;gap:10px;background-color:#1a1a2e;flex-shrink:0;box-sizing:border-box;width:100%; position: relative; z-index: 1002;}
    #chatbot-input{flex-grow:1;padding:10px;border-radius:20px;border:1px solid #6b21a8;background-color:#333355;color:#fff;box-sizing:border-box;min-width:0}
    .chatbot-action-btn{background-color:transparent;color:#fff;border:none;border-radius:50%;width:40px;height:40px;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:1.5em;transition:background-color .3s;flex-shrink:0}.chatbot-action-btn:hover{background-color:#5b189b}
    #image-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.85);display:none;justify-content:center;align-items:center;z-index:2000}#overlay-image{max-width:90%;max-height:90%;object-fit:contain;cursor:pointer}#overlay-close-btn{position:absolute;top:20px;right:35px;font-size:45px;color:#fff;cursor:pointer;line-height:1}
    #chatbot-image-previews { display: flex; gap: 8px; padding: 0 15px 10px 15px; flex-wrap: wrap; background-color: #1a1a2e;}
    .chat-preview-item { position: relative; }
    .chat-preview-img { height: 50px; width: 50px; object-fit: cover; border-radius: 5px; }
    .chat-preview-remove { position: absolute; top: -5px; right: -5px; background: #c44; color: white; border-radius: 50%; width: 18px; height: 18px; border: none; cursor: pointer; font-size: 12px; line-height: 18px; text-align: center; font-weight: bold; }
    .chat-message img { max-width: 100%; border-radius: 10px; margin-top: 5px; }
</style>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, setDoc, updateDoc, deleteDoc, getDoc, query, orderBy, addDoc, serverTimestamp, where, writeBatch, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";
    import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-functions.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyAjSUwa9HtVsxBhY__73XdLbWXHmlcIyUE",
      authDomain: "moore-club.firebaseapp.com",
      projectId: "moore-club",
      storageBucket: "moore-club.firebasestorage.app",
      messagingSenderId: "674972089844",
      appId: "1:674972089844:web:9d6f9680bec8f6cff98da1",
      measurementId: "G-RSPNMJ466D"
    };
    
    const firebaseApp = initializeApp(firebaseConfig);
    window.db = getFirestore(firebaseApp);
    window.storage = getStorage(firebaseApp);
    window.functions = getFunctions(firebaseApp);
    window.Firebase = {
        collection, getDocs, doc, setDoc, updateDoc, deleteDoc, getDoc, query, orderBy, addDoc, serverTimestamp, where, writeBatch, onSnapshot,
        ref, uploadBytes, getDownloadURL, deleteObject,
        httpsCallable
    };
</script>
</head>
<body class="text-purple-200">
<div id="anuncio-panel-lateral"></div>
<audio id="alarm-sound" src="alarm.mp3" preload="auto"></audio>
<audio id="notification-sound" src="notification.mp3" preload="auto"></audio>

<div class="bg-overlay min-h-screen">
<nav class="bg-purple-900 text-white px-6 py-4 flex justify-between items-center">
<h1 class="text-xl font-bold cursor-pointer" onclick="VanillaApp.mostrarInicio()">Vanilla</h1>
<ul class="flex space-x-6 text-sm">
<li><a class="hover:underline" href="#" onclick="VanillaApp.mostrarInicio()">Inicio</a></li>
<li><a class="hover:underline" href="#" onclick="VanillaApp.irAPanelEmpleado()">Empleados</a></li>
<li><a class="hover:underline" href="#" onclick="VanillaApp.mostrarPanelProductos()">Productos</a></li>
<li><a class="hover:underline" href="#" onclick="VanillaApp.mostrarPanelHabitaciones()">Habitaciones</a></li>
</ul>
</nav>
<main class="p-8" id="contenido"></main>
</div>

<div id="image-overlay"><span id="overlay-close-btn">&times;</span><img id="overlay-image" src="" alt="Imagen ampliada"></div>
<div id="chatbot-button-wrapper"><div id="chatbot-bubble">Si necesitas alguna cosa amor, dime y te ayudo</div><div id="chatbot-button"><img alt="Asistente de Chat" src="Luna.png"/></div></div>
<div id="chatbot-container">
    <div id="chatbot-header">
        <span>Asistente Vanilla</span>
        <div><button id="chatbot-minimize" title="Minimizar">_</button><button id="chatbot-close" title="Cerrar">X</button></div>
    </div>
    <div id="chatbot-messages"></div>
    <div id="chatbot-image-previews"></div>
    <div id="chatbot-input-container">
        <label for="chatbot-file-input" class="chatbot-action-btn" title="Subir imagen">+</label>
        <input type="file" id="chatbot-file-input" accept="image/*" style="display: none;" />
        <input id="chatbot-input" placeholder="Escribe tu mensaje..." type="text"/>
        <button id="chatbot-send" class="chatbot-action-btn">➤</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Aquí irá el objeto VanillaApp completo
});
</script>

</body>
</html>