<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Moore Club - La Tentación Empieza Aquí</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: url('mooreclub1.png') center top no-repeat;
      background-size: cover;
      background-attachment: fixed;
      color: #d8d8d8;
    }
    .bg-overlay {
      background-color: rgba(0, 0, 0, 0.85);
      min-height: 100vh;
      padding-bottom: 2rem;
    }
    nav {
      background-color: #4b0082;
    }
    .btn {
      background-color: #6b21a8;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
      margin-right: 0.5rem;
    }
    .btn:hover {
      background-color: #5b189b;
    }
    .btn-danger {
      background-color: #ef4444;
    }
    .btn-danger:hover {
      background-color: #dc2626;
    }
    .panel {
      background-color: #6b21a8;
      padding: 1.5rem;
      border-radius: 0.75rem;
      margin-top: 1rem;
      box-shadow: 0 0 15px rgba(107,33,168,0.7);
    }
    .card-product {
      background-color: #6b21a8;
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 0 10px rgba(107,33,168,0.6);
      margin: 0.5rem;
      width: 150px;
      display: inline-block;
      vertical-align: top;
      color: white;
    }
    .card-product img {
      max-width: 100px;
      margin-bottom: 0.5rem;
      border-radius: 0.5rem;
    }
    .card-person {
      background-color: #6b21a8;
      border-radius: 0.75rem;
      padding: 1rem;
      margin: 0.5rem;
      text-align: center;
      color: white;
      box-shadow: 0 0 15px rgba(107,33,168,0.8);
      display: inline-block;
      width: 180px;
    }
    .card-person img {
      max-width: 100px;
      margin-bottom: 0.5rem;
      border-radius: 9999px;
    }
    .flex-center {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
    }
    h2 {
      margin-bottom: 1rem;
      font-weight: 700;
    }
    input[type="number"] {
      width: 50px;
      padding: 0.3rem;
      border-radius: 0.3rem;
      border: none;
      text-align: center;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    #mensaje {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      background-color: #9f7aea;
      color: white;
      border-radius: 0.375rem;
      font-weight: 600;
      display: none;
    }
  </style>
</head>
<body>
  <div class="bg-overlay">
    <nav class="flex justify-between items-center px-6 py-4 text-white">
      <h1 class="text-xl font-bold cursor-pointer" onclick="mostrarInicio()">Moore Club</h1>
      <ul class="flex space-x-6 text-sm">
        <li><a href="#" onclick="mostrarInicio()" class="hover:underline">Inicio</a></li>
        <li><a href="#" onclick="mostrarPanelEmpleados()" class="hover:underline">Empleados</a></li>
        <li><a href="#" onclick="mostrarProductos()" class="hover:underline">Productos</a></li>
      </ul>
    </nav>

    <main id="contenido" class="px-8 py-6">
      <!-- Aquí se renderizarán los paneles -->
    </main>
  </div>

  <script>
    // Datos de empleados y productos
    const empleados = ['tito giovanni', 'marta'];
    let usuarioActual = null;

    // Objeto para almacenar datos de fichajes y ventas
    let datos = JSON.parse(localStorage.getItem('mooreDatos')) || {
      fichajes: {},
      ventas: {}
    };

    // Inicializamos fichajes y ventas para empleados si no existen
    empleados.forEach(emp => {
      if (!datos.fichajes[emp]) {
        datos.fichajes[emp] = {
          fichado: false,
          inicio: null,
          tiempoAcumuladoDia: 0,
          tiempoAcumuladoSemana: 0,
          tiempoAcumuladoTotal: 0
        };
      }
      if (!datos.ventas[emp]) {
        datos.ventas[emp] = {
          'tito dios griego': 0,
          'la tita': 0,
          'mascara dominante': 0,
          'pinzas led sweet pain': 0,
          'condones espadas del deseo': 0,
          'dildo doble fusion morada': 0,
          'banana pelada': 0,
          'magdalenas con glaseado rosa': 0,
          'berenjena rellena': 0,
          'coctel dulce': 0,
          'trago afrutado': 0,
          'almejas picantes': 0
        };
      }
    });

    // Guardar datos en localStorage
    function guardarDatos() {
      localStorage.setItem('mooreDatos', JSON.stringify(datos));
    }

    // Mostrar página de inicio con presentación de Tito y Marta
    function mostrarInicio() {
      usuarioActual = null;
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="panel">
          <h2>Bienvenido a Moore Club</h2>
          <p>Vive la experiencia única de nuestro club. Explora secciones, productos y gestiona el fichaje de nuestro personal.</p>
          <div class="flex-center" style="margin-top:2rem;">
            <div class="card-person">
              <img src="Tito.png" alt="Tito Giovanni" />
              <strong>Tito Giovanni</strong>
              <p>Maestro de ceremonias y corazón de Moore. Carisma y elegancia en estado puro.</p>
            </div>
            <div class="card-person">
              <img src="Tita.png" alt="Marta" />
              <strong>Marta</strong>
              <p>La musa del club, sensualidad y actitud que cautiva en cada show.</p>
            </div>
          </div>
          <div style="margin-top: 2rem;">
            <button class="btn" onclick="mostrarPanelEmpleados()">Área Empleados</button>
            <button class="btn" onclick="mostrarProductos()">Nuestros Productos</button>
          </div>
        </div>
      `;
    }

    // Mostrar panel empleados con fichaje y ventas
    function mostrarPanelEmpleados() {
      if (!usuarioActual) {
        mostrarLogin();
        return;
      }
      const contenido = document.getElementById('contenido');

      // Crear tarjetas para productos sin descripción
      const productosKeys = Object.keys(datos.ventas[usuarioActual]);
      let productosHTML = '';
      productosKeys.forEach(prod => {
        const nombreFormateado = prod.charAt(0).toUpperCase() + prod.slice(1);
        productosHTML += `
          <div class="card-product">
            <img src="${prod.replace(/ /g, '').toLowerCase()}.png" alt="${nombreFormateado}" onerror="this.style.display='none'" />
            <strong>${nombreFormateado}</strong><br/>
            <input type="number" min="0" value="0" id="input-${prod}" onchange="actualizarVentas('${prod}')" />
            <div>Total: <span id="total-${prod}">${datos.ventasGlobal ? datos.ventasGlobal[prod] || 0 : 0}</span></div>
          </div>`;
      });

      contenido.innerHTML = `
        <div class="panel">
          <h2>Panel de Fichaje - ${usuarioActual}</h2>
          <button class="btn" onclick="ficharEntrada()" ${datos.fichajes[usuarioActual].fichado ? 'disabled' : ''}>Fichar Entrada</button>
          <button class="btn" onclick="ficharSalida()" ${!datos.fichajes[usuarioActual].fichado ? 'disabled' : ''}>Fichar Salida</button>
          <button class="btn btn-danger" onclick="cerrarSesion()">Cerrar Sesión</button>
          <p style="margin-top: 1rem;">
            Tiempo trabajado hoy: <span id="tiempoHoy">00:00:00</span><br/>
            Horas trabajadas esta semana: <span id="tiempoSemana">00:00:00</span><br/>
            Horas totales acumuladas: <span id="tiempoTotal">00:00:00</span>
          </p>
          <h3>Ventas registradas</h3>
          <p>Registrar ventas de productos:</p>
          <div class="flex-center" style="flex-wrap: wrap;">${productosHTML}</div>
          <div id="mensaje"></div>
        </div>
      `;

      actualizarContadores();
      actualizarVentasGlobal();
    }

    // Mostrar página login
    function mostrarLogin() {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="panel">
          <h2>Acceso Empleados</h2>
          <label>Selecciona tu nombre:</label>
          <select id="selectEmpleado" onchange="seleccionarEmpleado()">
            <option value="">-- Seleccionar --</option>
            ${empleados.map(e => `<option value="${e}">${e.charAt(0).toUpperCase() + e.slice(1)}</option>`).join('')}
          </select>
        </div>
      `;
    }

    function seleccionarEmpleado() {
      const select = document.getElementById('selectEmpleado');
      if (select.value) {
        usuarioActual = select.value;
        mostrarPanelEmpleados();
      }
    }

    // Funciones fichar entrada/salida y actualización del tiempo
    let intervaloTiempo = null;

    function actualizarContadores() {
      if (!usuarioActual) return;

      const fichaje = datos.fichajes[usuarioActual];
      if (!fichaje) return;

      // Calcular tiempo acumulado
      let tiempoAcumulado = fichaje.tiempoAcumuladoTotal || 0;
      if (fichaje.fichado && fichaje.inicio) {
        tiempoAcumulado += Date.now() - fichaje.inicio;
      }

      // Actualizar contadores en pantalla
      document.getElementById('tiempoTotal').textContent = formatoTiempo(tiempoAcumulado);
      document.getElementById('tiempoHoy').textContent = formatoTiempo(fichaje.tiempoAcumuladoDia || 0);
      document.getElementById('tiempoSemana').textContent = formatoTiempo(fichaje.tiempoAcumuladoSemana || 0);
    }

    function formatoTiempo(ms) {
      let totalSegundos = Math.floor(ms / 1000);
      let horas = Math.floor(totalSegundos / 3600);
      let minutos = Math.floor((totalSegundos % 3600) / 60);
      let segundos = totalSegundos % 60;
      return `${String(horas).padStart(2,'0')}:${String(minutos).padStart(2,'0')}:${String(segundos).padStart(2,'0')}`;
    }

    function ficharEntrada() {
      if (!usuarioActual) return;
      const fichaje = datos.fichajes[usuarioActual];
      if (fichaje.fichado) return alert('Ya estás fichado.');

      fichaje.fichado = true;
      fichaje.inicio = Date.now();

      // Iniciar el intervalo para actualizar contadores cada segundo
      if (intervaloTiempo) clearInterval(intervaloTiempo);
      intervaloTiempo = setInterval(() => {
        fichaje.tiempoAcumuladoDia += 1000;
        fichaje.tiempoAcumuladoSemana += 1000;
        fichaje.tiempoAcumuladoTotal += 1000;
        actualizarContadores();
        guardarDatos();
      }, 1000);

      guardarDatos();
      mostrarPanelEmpleados();
    }

    function ficharSalida() {
      if (!usuarioActual) return;
      const fichaje = datos.fichajes[usuarioActual];
      if (!fichaje.fichado) return alert('No estás fichado.');

      fichaje.fichado = false;
      fichaje.inicio = null;

      if (intervaloTiempo) {
        clearInterval(intervaloTiempo);
        intervaloTiempo = null;
      }

      guardarDatos();
      mostrarPanelEmpleados();
    }

    // Ventas: actualizar por empleado
    function actualizarVentas(nombreProducto) {
      if (!usuarioActual) return;
      const input = document.getElementById(`input-${nombreProducto}`);
      let cantidad = parseInt(input.value);
      if (isNaN(cantidad) || cantidad < 0) {
        cantidad = 0;
        input.value = cantidad;
      }

      datos.ventas[usuarioActual][nombreProducto] = cantidad;
      guardarDatos();
      actualizarVentasGlobal();
    }

    // Ventas globales suma todas ventas
    function actualizarVentasGlobal() {
      if (!datos.ventasGlobal) {
        datos.ventasGlobal = {};
      }

      // Reiniciamos los totales
      Object.keys(datos.ventasGlobal).forEach(key => datos.ventasGlobal[key] = 0);

      // Sumamos todas las ventas de cada empleado
      Object.values(datos.ventas).forEach(empVentas => {
        Object.entries(empVentas).forEach(([prod, cant]) => {
          if (!datos.ventasGlobal[prod]) datos.ventasGlobal[prod] = 0;
          datos.ventasGlobal[prod] += cant;
        });
      });

      // Actualizamos los totales en la UI si existen
      Object.keys(datos.ventasGlobal).forEach(prod => {
        const spanTotal = document.getElementById(`total-${prod}`);
        if (spanTotal) {
          spanTotal.textContent = datos.ventasGlobal[prod];
        }
      });

      guardarDatos();
    }

    // Mostrar panel productos (solo imagen y descripción)
    function mostrarProductos() {
      const productos = [
        {
          nombre: 'banana pelada',
          imagen: 'banana.png',
          descripcion: 'Provocadora y dulce hasta el final.'
        },
        {
          nombre: 'magdalenas con glaseado rosa',
          imagen: 'magdalenas.png',
          descripcion: 'Dos razones para pecar.'
        },
        {
          nombre: 'berenjena rellena',
          imagen: 'berenjena.png',
          descripcion: 'Caliente y jugosa. Te va a dejar sudando.'
        },
        {
          nombre: 'coctel dulce',
          imagen: 'coctel.png',
          descripcion: 'Tierno al principio, travieso al final.'
        },
        {
          nombre: 'trago afrutado',
          imagen: 'tragoafrutado.png',
          descripcion: 'Refresca... y se te queda pegado.'
        },
        {
          nombre: 'almejas picantes',
          imagen: 'almejas.png',
          descripcion: 'Suave por fuera, fuego por dentro.'
        },
        {
          nombre: 'tito dios griego',
          imagen: 'tito.png',
          descripcion: 'Figura divina, musculoso, con toga morada.'
        },
        {
          nombre: 'la tita',
          imagen: 'tita.png',
          descripcion: 'Muñeca provocadora con actitud descarada.'
        },
        {
          nombre: 'mascara dominante',
          imagen: 'mascara.png',
          descripcion: 'Cuero morado con orejas felinas.'
        },
        {
          nombre: 'pinzas led sweet pain',
          imagen: 'pinzas.png',
          descripcion: 'Pinzas con corazones LED que brillan.'
        },
        {
          nombre: 'preservativos espadas del deseo',
          imagen: 'condones.png',
          descripcion: 'Rojo y azul en envase negro brillante.'
        },
        {
          nombre: 'dildo doble fusion morada',
          imagen: 'dildo.webp',
          descripcion: 'Flexible y listo para retos atrevidos.'
        }
      ];

      const contenido = document.getElementById('contenido');
      let html = `<h2>Productos Moore Club</h2><div class="flex-center" style="flex-wrap: wrap;">`;

      productos.forEach(prod => {
        html += `
          <div class="card-product">
            <img src="${prod.imagen}" alt="${prod.nombre}" />
            <strong>${prod.nombre.charAt(0).toUpperCase() + prod.nombre.slice(1)}</strong>
            <p>${prod.descripcion}</p>
          </div>`;
      });

      html += '</div><button class="btn" style="margin-top: 1rem;" onclick="mostrarInicio()">Volver</button>';

      contenido.innerHTML = html;
    }

    // Cerrar sesión
    function cerrarSesion() {
      usuarioActual = null;
      mostrarInicio();
    }

    // Al cargar página, mostrar inicio
    mostrarInicio();
  </script>
</body>
</html>
