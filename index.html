<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Moore Club - La Tentación Empieza Aquí</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    font-family: 'Inter', sans-serif;
    background: url('mooreclub1.png') center top no-repeat;
    background-size: cover;
    background-attachment: fixed;
  }
  .bg-overlay {
    background-color: rgba(0,0,0,0.85);
  }
  .btn {
    background-color: #6b21a8;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 0.375rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-right: 0.5rem;
  }
  .btn:hover {
    background-color: #5b189b;
  }
  #mensaje {
    margin-top: 1rem;
    padding: 0.5rem 1rem;
    background-color: #9f7aea;
    color: white;
    border-radius: 0.375rem;
    font-weight: 600;
    opacity: 0;
    transition: opacity 0.3s ease;
    max-width: 300px;
  }
  #mensaje.visible {
    opacity: 1;
  }
</style>
</head>
<body class="text-purple-200">
<div class="bg-overlay min-h-screen">

<nav class="bg-purple-900 text-white px-6 py-4 flex justify-between items-center">
  <h1 class="text-xl font-bold cursor-pointer" onclick="mostrarInicio()">Moore Club</h1>
  <ul class="flex space-x-6 text-sm">
    <li><a href="#" onclick="mostrarInicio()" class="hover:underline">Inicio</a></li>
    <li><a href="#" onclick="abrirEmpleados()" class="hover:underline">Empleados</a></li>
  </ul>
</nav>

<main id="contenido" class="p-8 min-h-[80vh]">
  <!-- Contenido dinámico aquí -->
</main>

</div>

<script>
  // Empleados válidos
  const empleadosValidos = ['tito giovanni', 'marta as']

  // Estados fichaje
  let estadosTrabajo = JSON.parse(localStorage.getItem('estadosTrabajo')) || {
    'tito giovanni': { fichado: false, inicio: null, tiempoAcumulado: 0 },
    'marta as': { fichado: false, inicio: null, tiempoAcumulado: 0 }
  }

  // Productos peluches y ventas
  const productosPeluches = [
    { id: 'tito', nombre: 'Tito Dios Griego', img: 'tito.png' },
    { id: 'tita', nombre: 'La Tita', img: 'tita.png' },
    { id: 'mascara', nombre: 'Máscara Dominante “Cat Vanilla”', img: 'mascara.png' },
    { id: 'pinzas', nombre: 'Pinzas LED “Sweet Pain”', img: 'pinzas.png' },
    { id: 'condones', nombre: 'Condones “Espadas del Deseo”', img: 'condones.png' },
    { id: 'dildo', nombre: 'Dildo Doble “Fusión Morada”', img: 'dildo.png' }
  ]

  let ventasPeluches = JSON.parse(localStorage.getItem('ventasPeluches')) || {
    tito: 0, tita: 0, mascara: 0, pinzas: 0, condones: 0, dildo: 0
  }

  // Productos comida y bebida y ventas
  const productosComida = [
    { id: 'banana', nombre: 'Banana pelada con glaseado y cerezas', img: 'banana.png', descripcion: 'Provocadora y dulce hasta el final.' },
    { id: 'magdalenas', nombre: 'Magdalenas con glaseado rosa', img: 'magdalenas.png', descripcion: 'Dos razones para pecar.' },
    { id: 'berenjena', nombre: 'Berenjena rellena', img: 'berenjena.png', descripcion: 'Caliente y jugosa, te va a dejar sudando.' },
    { id: 'coctel', nombre: 'Cóctel dulce con cereza y fresa', img: 'coctel.png', descripcion: 'Tierno al principio, travieso al final.' },
    { id: 'trago', nombre: 'Trago afrutado y ácido', img: 'trago.png', descripcion: 'Refresca y se te queda pegado.' },
    { id: 'almejas', nombre: 'Almejas picantes con limón', img: 'almejas.png', descripcion: 'Suave por fuera, fuego por dentro.' }
  ]

  let ventasComida = JSON.parse(localStorage.getItem('ventasComida')) || {
    banana: 0, magdalenas: 0, berenjena: 0, coctel: 0, trago: 0, almejas: 0
  }

  let empleadoActual = sessionStorage.getItem('empleadoActual') || null
  let intervaloContador = null

  function guardarEstadosTrabajo() {
    localStorage.setItem('estadosTrabajo', JSON.stringify(estadosTrabajo))
  }
  function guardarVentasPeluches() {
    localStorage.setItem('ventasPeluches', JSON.stringify(ventasPeluches))
  }
  function guardarVentasComida() {
    localStorage.setItem('ventasComida', JSON.stringify(ventasComida))
  }

  function mostrarMensaje(texto) {
    const mensaje = document.getElementById('mensaje')
    if (!mensaje) return
    mensaje.textContent = texto
    mensaje.classList.add('visible')
    setTimeout(() => mensaje.classList.remove('visible'), 3000)
  }

  // Página bienvenida con paneles elegantes
  function mostrarInicio() {
    empleadoActual = null
    sessionStorage.removeItem('empleadoActual')
    document.getElementById('contenido').innerHTML = `
      <main class="min-h-screen flex flex-col justify-center items-center px-6 py-12 bg-gradient-to-b from-black via-purple-900 to-black bg-opacity-90 text-purple-200">
        <h1 class="text-6xl font-extrabold mb-12 drop-shadow-lg text-center">Bienvenido a <span class="text-purple-400">Moore Club</span></h1>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 max-w-7xl w-full mb-16">
          <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
            <h2 class="text-2xl font-bold mb-3">Nuestra Historia</h2>
            <p class="text-purple-300 leading-relaxed">Un lugar de lujo y misterio donde cada noche es única</p>
          </div>
          <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
            <h2 class="text-2xl font-bold mb-3">Eventos Exclusivos</h2>
            <p class="text-purple-300 leading-relaxed">Fiestas, shows y experiencias que solo Moore Club ofrece</p>
          </div>
          <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
            <h2 class="text-2xl font-bold mb-3">Reservas VIP</h2>
            <p class="text-purple-300 leading-relaxed">Reserva tu mesa o zona privada con atención personalizada</p>
          </div>
          <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
            <h2 class="text-2xl font-bold mb-3">Contacto & Redes</h2>
            <p class="text-purple-300 leading-relaxed">Síguenos y mantente al día con nuestras novedades</p>
          </div>
        </div>

        <section class="max-w-7xl w-full grid grid-cols-1 md:grid-cols-2 gap-10 mb-16">
          <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 flex flex-col items-center text-center shadow-lg">
            <img src="tito.png" alt="Tito Giovanni" class="w-48 rounded-full mb-4 shadow-xl" />
            <h3 class="text-3xl font-semibold mb-2">Tito Giovanni</h3>
            <p class="text-purple-300">Líder carismático y extravagante del Moore Club. Siempre con su traje morado y sombrero de copa, es la esencia del lujo y la diversión.</p>
          </div>
          <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 flex flex-col items-center text-center shadow-lg">
            <img src="marta.png" alt="Marta AS" class="w-48 rounded-full mb-4 shadow-xl" />
            <h3 class="text-3xl font-semibold mb-2">Marta AS</h3>
            <p class="text-purple-300">La reina del club, pareja de Tito, con un estilo único y una presencia que domina el ambiente. Su energía hace vibrar cada evento.</p>
          </div>
        </section>

        <section class="max-w-7xl w-full mb-16">
          <h2 class="text-4xl font-bold mb-8 text-center">Objetos Emblemáticos</h2>
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-10">
            <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 text-center shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
              <img src="tito.png" alt="Peluche Tito Dios Griego" class="mx-auto mb-4 w-36" />
              <h3 class="text-2xl font-semibold mb-2">Peluche Tito Dios Griego</h3>
              <p class="text-purple-300">Un símbolo de poder y estilo, fiel a la esencia del Moore Club.</p>
            </div>
            <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 text-center shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
              <img src="mascara.png" alt="Máscara Dominante Cat Vanilla" class="mx-auto mb-4 w-36" />
              <h3 class="text-2xl font-semibold mb-2">Máscara Dominante “Cat Vanilla”</h3>
              <p class="text-purple-300">Un toque misterioso y seductor para las noches más inolvidables.</p>
            </div>
            <div class="bg-purple-900 bg-opacity-70 rounded-lg p-6 text-center shadow-lg hover:shadow-xl transition-shadow cursor-pointer">
              <img src="condones.png" alt="Condones Espadas del Deseo" class="mx-auto mb-4 w-36" />
              <h3 class="text-2xl font-semibold mb-2">Condones “Espadas del Deseo”</h3>
              <p class="text-purple-300">Para quienes buscan que la pasión no tenga límites.</p>
            </div>
          </div>
        </section>

        <button onclick="abrirEmpleados()" class="mt-8 px-16 py-4 bg-purple-700 hover:bg-purple-800 rounded-full text-white text-2xl font-semibold shadow-lg transition duration-300">Acceso Empleados</button>
      </main>
    `
  }

  // Abrir panel empleados o login
  function abrirEmpleados() {
    empleadoActual = sessionStorage.getItem('empleadoActual')
    if (!empleadoActual) {
      mostrarLoginFichaje()
    } else {
      mostrarPanelEmpleados()
    }
  }

  // Login empleado
  function mostrarLoginFichaje() {
    document.getElementById('contenido').innerHTML = `
      <h2 class="text-2xl font-bold mb-4">Acceso Empleado</h2>
      <div class="max-w-md bg-black bg-opacity-30 p-6 rounded shadow">
        <label class="block mb-2">Nombre completo (minúsculas)</label>
        <input id="nombreEmpleado" type="text" class="w-full px-3 py-2 mb-4 text-black" placeholder="Ej: tito giovanni" />
        <button onclick="loginEmpleado()" class="btn w-full">Entrar</button>
      </div>
      <div id="mensaje"></div>
    `
  }

  function loginEmpleado() {
    const nombre = document.getElementById('nombreEmpleado').value.trim().toLowerCase()
    if (!nombre) {
      mostrarMensaje('Introduce un nombre válido')
      return
    }
    if (!empleadosValidos.includes(nombre)) {
      mostrarMensaje('Empleado no registrado')
      return
    }
    empleadoActual = nombre
    sessionStorage.setItem('empleadoActual', empleadoActual)
    mostrarPanelEmpleados()
  }

  function cerrarSesion() {
    empleadoActual = null
    sessionStorage.removeItem('empleadoActual')
    pararContador()
    mostrarInicio()
  }

  // Panel empleados con submenú
  function mostrarPanelEmpleados() {
    const contenido = document.getElementById('contenido')
    contenido.innerHTML = `
      <h2 class="text-2xl font-bold mb-4">Panel Empleados - ${empleadoActual}</h2>
      <div class="mb-4 space-x-4">
        <button class="btn" onclick="mostrarFichaje()">Fichaje</button>
        <button class="btn" onclick="mostrarVentasPeluches()">Ventas Peluches</button>
        <button class="btn" onclick="mostrarVentasComida()">Ventas Comida</button>
        <button class="btn bg-red-600 hover:bg-red-700" onclick="cerrarSesion()">Cerrar Sesión</button>
      </div>
      <div id="subcontenido"></div>
      <div id="mensaje"></div>
    `
    mostrarFichaje()
  }

  // Fichaje
  function mostrarFichaje() {
    const subcontenido = document.getElementById('subcontenido')
    const estado = estadosTrabajo[empleadoActual]
    subcontenido.innerHTML = `
      <button class="btn mr-2" onclick="ficharEntrada()">Fichar Entrada</button>
      <button class="btn mr-2" onclick="ficharSalida()">Fichar Salida</button>
      <div id="contador" class="mt-2 font-mono text-lg"></div>
      <div class="mt-4" id="estadoGeneral"></div>
    `
    actualizarEstadoGeneral()
    if (estado?.fichado) iniciarContador()
    else pararContador()
  }

  function ficharEntrada() {
    const estado = estadosTrabajo[empleadoActual]
    if (estado.fichado) {
      mostrarMensaje('Ya estás fichado')
      return
    }
    estado.fichado = true
    estado.inicio = Date.now()
    guardarEstadosTrabajo()
    actualizarEstadoGeneral()
    mostrarMensaje('Fichado correctamente')
    iniciarContador()
  }

  function ficharSalida() {
    const estado = estadosTrabajo[empleadoActual]
    if (!estado.fichado) {
      mostrarMensaje('No estás fichado')
      return
    }
    estado.fichado = false
    estado.tiempoAcumulado += Date.now() - estado.inicio
    estado.inicio = null
    guardarEstadosTrabajo()
    actualizarEstadoGeneral()
    mostrarMensaje('Salida registrada')
    pararContador()
  }

  // Contador tiempo fichado (solo cuenta tiempo desde fichar, sin acumular en el display)
  function iniciarContador() {
    const contador = document.getElementById('contador')
    if (!contador) return

    function actualizar() {
      const estado = estadosTrabajo[empleadoActual]
      if (!estado.fichado || !estado.inicio) {
        contador.textContent = '00:00:00'
        return
      }
      const tiempoDesdeFichaje = Date.now() - estado.inicio
      contador.textContent = formatearTiempo(tiempoDesdeFichaje)
    }

    actualizar()
    intervaloContador = setInterval(actualizar, 1000)
  }

  function pararContador() {
    if (intervaloContador) {
      clearInterval(intervaloContador)
      intervaloContador = null
    }
    const contador = document.getElementById('contador')
    if (contador) contador.textContent = '00:00:00'
  }

  function formatearTiempo(ms) {
    let totalSeg = Math.floor(ms / 1000)
    let horas = Math.floor(totalSeg / 3600)
    let minutos = Math.floor((totalSeg % 3600) / 60)
    let segundos = totalSeg % 60
    return `${horas.toString().padStart(2,'0')}:${minutos.toString().padStart(2,'0')}:${segundos.toString().padStart(2,'0')}`
  }

  // Mostrar estado general fichaje
  function actualizarEstadoGeneral() {
    const cont = document.getElementById('estadoGeneral')
    const hoy = new Date()
    const inicioDia = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate()).getTime()
    const diaSemana = hoy.getDay()
    const inicioSemana = new Date(hoy.getFullYear(), hoy.getMonth(), hoy.getDate() - ((diaSemana + 6) % 7)).getTime()

    let html = `<table class="min-w-full text-left border-collapse border border-purple-600">
      <thead>
        <tr class="bg-purple-800">
          <th class="border border-purple-700 px-4 py-2">Empleado</th>
          <th class="border border-purple-700 px-4 py-2">Horas hoy</th>
          <th class="border border-purple-700 px-4 py-2">Horas esta semana</th>
          <th class="border border-purple-700 px-4 py-2">Horas totales</th>
          <th class="border border-purple-700 px-4 py-2">Estado</th>
        </tr>
      </thead>
      <tbody>`

    function msAHoras(ms) {
      return (ms / 3600000).toFixed(2)
    }

    for (const [usuario, datos] of Object.entries(estadosTrabajo)) {
      let tiempoAcumulado = datos.tiempoAcumulado
      let tiempoHoy = 0
      let tiempoSemana = 0

      if (datos.fichado && datos.inicio) {
        const ahora = Date.now()
        tiempoAcumulado += (ahora - datos.inicio)
        if (datos.inicio > inicioDia) {
          tiempoHoy += ahora - datos.inicio
        }
        if (datos.inicio > inicioSemana) {
          tiempoSemana += ahora - datos.inicio
        }
      }

      html += `<tr>
        <td class="border border-purple-700 px-4 py-2">${usuario}</td>
        <td class="border border-purple-700 px-4 py-2">${msAHoras(tiempoHoy)}</td>
        <td class="border border-purple-700 px-4 py-2">${msAHoras(tiempoSemana)}</td>
        <td class="border border-purple-700 px-4 py-2">${msAHoras(tiempoAcumulado)}</td>
        <td class="border border-purple-700 px-4 py-2">${datos.fichado ? 'Fichado' : 'No fichado'}</td>
      </tr>`
    }

    html += `</tbody></table>`
    cont.innerHTML = html
  }

  // Ventas Peluches
  function mostrarVentasPeluches() {
    const subcontenido = document.getElementById('subcontenido')
    let html = `<div class="grid grid-cols-1 md:grid-cols-2 gap-6">`
    productosPeluches.forEach(p => {
      html += `
        <div class="bg-black bg-opacity-30 p-4 rounded">
          <h3 class="font-semibold mb-2">${p.nombre}</h3>
          <img src="${p.img}" alt="${p.nombre}" class="w-24 mb-2" />
          <p>Total vendido: <strong id="total-${p.id}">${ventasPeluches[p.id]}</strong></p>
          <input type="number" id="input-${p.id}" min="1" placeholder="Cantidad a añadir" class="w-full px-2 py-1 mb-2 text-black" />
          <button onclick="agregarVenta('${p.id}')" class="btn w-full">Añadir ventas</button>
        </div>`
    })
    html += `</div>`
    subcontenido.innerHTML = html
  }

  function agregarVenta(id) {
    const input = document.getElementById(`input-${id}`)
    const valor = parseInt(input.value)
    if (isNaN(valor) || valor <= 0) {
      mostrarMensaje('Introduce una cantidad válida')
      return
    }
    ventasPeluches[id] += valor
    guardarVentasPeluches()
    document.getElementById(`total-${id}`).textContent = ventasPeluches[id]
    input.value = ''
  }

  // Ventas Comida y Bebida
  function mostrarVentasComida() {
    const subcontenido = document.getElementById('subcontenido')
    let html = `<div class="grid grid-cols-1 md:grid-cols-2 gap-6">`
    productosComida.forEach(p => {
      html += `
        <div class="bg-black bg-opacity-30 p-4 rounded">
          <h3 class="font-semibold mb-2">${p.nombre}</h3>
          <img src="${p.img}" alt="${p.nombre}" class="w-24 mb-2" />
          <p class="italic mb-2">${p.descripcion}</p>
          <p>Total vendido: <strong id="total-comida-${p.id}">${ventasComida[p.id]}</strong></p>
          <input type="number" id="input-comida-${p.id}" min="1" placeholder="Cantidad a añadir" class="w-full px-2 py-1 mb-2 text-black" />
          <button onclick="agregarVentaComida('${p.id}')" class="btn w-full">Añadir ventas</button>
        </div>`
    })
    html += `</div>`
    subcontenido.innerHTML = html
  }

  function agregarVentaComida(id) {
    const input = document.getElementById(`input-comida-${id}`)
    const valor = parseInt(input.value)
    if (isNaN(valor) || valor <= 0) {
      mostrarMensaje('Introduce una cantidad válida')
      return
    }
    ventasComida[id] += valor
    guardarVentasComida()
    document.getElementById(`total-comida-${id}`).textContent = ventasComida[id]
    input.value = ''
  }

  // Al cargar la página
  window.onload = () => {
    if (sessionStorage.getItem('empleadoActual')) {
      empleadoActual = sessionStorage.getItem('empleadoActual')
      mostrarPanelEmpleados()
    } else {
      mostrarInicio()
    }
  }
</script>
</body>
</html>
