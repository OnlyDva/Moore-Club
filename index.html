<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Moore Club - La Tentación Empieza Aquí</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1e1b29;
      color: #d3c0f9;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    nav {
      background-color: #6b21a8;
      color: white;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav h1 {
      cursor: pointer;
      font-weight: 700;
      font-size: 1.5rem;
    }
    nav ul {
      display: flex;
      gap: 1.5rem;
    }
    nav ul li a {
      color: white;
      cursor: pointer;
      text-decoration: none;
      font-weight: 600;
    }
    nav ul li a:hover {
      text-decoration: underline;
    }
    main {
      flex: 1;
      padding: 2rem;
      background: linear-gradient(180deg, rgba(30,27,41,1) 0%, rgba(24,20,34,1) 100%);
    }
    .panel {
      background: rgba(107,33,168,0.85);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 0 20px rgba(107,33,168,0.7);
      color: #e9d9ff;
      max-width: 900px;
      margin: 0 auto;
    }
    .btn {
      background-color: #6b21a8;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-right: 1rem;
      border: none;
    }
    .btn:hover {
      background-color: #5b189b;
    }
    .btn-red {
      background-color: #d32f2f;
    }
    .btn-red:hover {
      background-color: #b02727;
    }
    .producto {
      background: rgba(107, 33, 168, 0.85);
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(107, 33, 168, 0.7);
      width: 220px;
      padding: 1rem;
      text-align: center;
      transition: transform 0.3s ease;
      cursor: default;
      margin: 1rem;
      color: #e9d9ff;
    }
    .producto:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px rgba(107, 33, 168, 1);
    }
    .producto img {
      width: 140px;
      height: auto;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    .producto p {
      font-size: 0.9rem;
      font-weight: 500;
      line-height: 1.3;
      margin: 0 auto;
    }
    .flex-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
    }
    .hidden {
      display: none;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 0.5rem;
      border-radius: 0.375rem;
      border: none;
      margin-bottom: 1rem;
      font-size: 1rem;
      color: black;
    }
    textarea {
      resize: vertical;
      height: 100px;
    }
    label {
      font-weight: 600;
      margin-bottom: 0.25rem;
      display: block;
    }
  </style>
</head>
<body>

  <nav>
    <h1 onclick="mostrarInicio()">Moore Club</h1>
    <ul>
      <li><a onclick="mostrarInicio()">Inicio</a></li>
      <li><a onclick="mostrarLoginVIP()">Empleados</a></li>
      <li><a onclick="mostrarProductos()">Productos</a></li>
    </ul>
  </nav>

  <main id="contenido">
    <!-- Aquí carga el contenido dinámico -->
  </main>

  <script>
    // Datos de empleados y ventas en localStorage
    let empleados = JSON.parse(localStorage.getItem('empleados')) || ['tito giovanni', 'marta as'];
    let fichajes = JSON.parse(localStorage.getItem('fichajes')) || {};
    let ventas = JSON.parse(localStorage.getItem('ventas')) || {
      "tito dios griego": 0,
      "la tita": 0,
      "mascara dominante": 0,
      "pinzas led sweet pain": 0,
      "condones espadas del deseo": 0,
      "dildo doble fusion morada": 0,
      "banana pelada": 0,
      "magdalenas con glaseado rosa": 0,
      "berenjena rellena": 0,
      "coctel dulce": 0,
      "trago afrutado": 0,
      "almejas picantes": 0
    };

    function guardarEmpleados() {
      localStorage.setItem('empleados', JSON.stringify(empleados));
    }
    function guardarFichajes() {
      localStorage.setItem('fichajes', JSON.stringify(fichajes));
    }
    function guardarVentas() {
      localStorage.setItem('ventas', JSON.stringify(ventas));
    }

    // Mostrar Inicio
    function mostrarInicio() {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="panel">
          <h2 style="font-size:2rem; margin-bottom:1rem;">Bienvenido a Moore Club</h2>
          <p>Vive la experiencia única de nuestro club. Explora secciones, productos y gestiona el fichaje de nuestro personal.</p>
          <div style="margin-top: 1.5rem;">
            <button class="btn" onclick="mostrarLoginVIP()">Área Empleados</button>
            <button class="btn" onclick="mostrarProductos()">Nuestros Productos</button>
          </div>
          <div style="margin-top: 2rem; display:flex; gap:2rem; flex-wrap:wrap; justify-content:center;">
            <div style="max-width:300px; background:rgba(107,33,168,0.7); border-radius: 12px; padding: 1rem; box-shadow:0 0 15px rgba(107,33,168,0.5); text-align:center;">
              <img src="Tito.png" alt="Tito Dios Griego" style="width:120px; border-radius:8px; margin-bottom:1rem;" />
              <p><strong>Tito Giovanni</strong><br>Maestro de ceremonias y corazón de Moore. Carisma y elegancia en estado puro.</p>
            </div>
            <div style="max-width:300px; background:rgba(107,33,168,0.7); border-radius: 12px; padding: 1rem; box-shadow:0 0 15px rgba(107,33,168,0.5); text-align:center;">
              <img src="Tita.png" alt="La Tita" style="width:120px; border-radius:8px; margin-bottom:1rem;" />
              <p><strong>Marta</strong><br>La musa del club, sensualidad y actitud que cautiva en cada show.</p>
            </div>
          </div>
        </div>
      `;
    }

    // Mostrar productos
    function mostrarProductos() {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <h2 style="text-align:center; font-size:2rem; margin-bottom:1rem;">Productos Moore Club</h2>
        <div class="flex-row">
          <div class="producto">
            <img src="banana.png" alt="Banana Pelada" />
            <p><strong>Banana Pelada</strong><br>Banana pelada con glaseado y cerezas. Provocadora y dulce hasta el final.</p>
          </div>
          <div class="producto">
            <img src="magdalenas.png" alt="Magdalenas" />
            <p><strong>Magdalenas con glaseado rosa</strong><br>Magdalenas con glaseado rosa y toques sugerentes. Dos razones para pecar.</p>
          </div>
          <div class="producto">
            <img src="berenjena.png" alt="Berenjena Rellena" />
            <p><strong>Berenjena Rellena</strong><br>Berenjena rellena, caliente y jugosa. Te va a dejar sudando.</p>
          </div>
          <div class="producto">
            <img src="coctel.png" alt="Cóctel Dulce" />
            <p><strong>Cóctel Dulce</strong><br>Cóctel dulce con cereza y fresa. Tierno al principio, travieso al final.</p>
          </div>
          <div class="producto">
            <img src="trago afrutado.png" alt="Trago Afrutado" />
            <p><strong>Trago Afrutado</strong><br>Trago afrutado y ácido. Refresca... y se te queda pegado.</p>
          </div>
          <div class="producto">
            <img src="almejas.png" alt="Almejas Picantes" />
            <p><strong>Almejas Picantes</strong><br>Almejas picantes con limón. Suave por fuera, fuego por dentro.</p>
          </div>
          <div class="producto">
            <img src="Tito.png" alt="Tito Dios Griego" />
            <p><strong>Tito Dios Griego</strong><br>Figura decorativa de Tito en forma divina, musculoso, sin camiseta y con toga morada.<br>"Hecho a imagen de un dios... pero con curvas para el pecado."</p>
          </div>
          <div class="producto">
            <img src="Tita.png" alt="La Tita" />
            <p><strong>La Tita</strong><br>Muñeca provocadora con vestido griego y actitud descarada. El alma coqueta del Vanilla.<br>"No está hecha para mirar... está hecha para imaginar."</p>
          </div>
          <div class="producto">
            <img src="Mascara.png" alt="Máscara Dominante" />
            <p><strong>Máscara Dominante “Cat Vanilla”</strong><br>Máscara de cuero morado con orejas felinas. Perfecta para rol de poder y seducción.<br>"Ponte la máscara... y deja que tus instintos tomen el control."</p>
          </div>
          <div class="producto">
            <img src="Pinzas.png" alt="Pinzas LED Sweet Pain" />
            <p><strong>Pinzas LED “Sweet Pain”</strong><br>Pinzas ajustables con corazones LED que brillan al ritmo del deseo. Dolor y placer, con estilo.<br>"Brillan cuando lo estás disfrutando... y tú, también."</p>
          </div>
          <div class="producto">
            <img src="Coctel.png" alt="Preservativos Espadas del Deseo" />
            <p><strong>Preservativos “Espadas del Deseo”</strong><br>Preservativos rojo y azul en envase negro brillante. Un dúo elegante para encuentros con chispa.<br>"Elige tu sable... y que la Fuerza te acompañe."</p>
          </div>
          <div class="producto">
            <img src="Dildo.webp" alt="Dildo Doble Fusión Morada" />
            <p><strong>Dildo Doble “Fusión Morada”</strong><br>Juguete translúcido de doble entrada. Flexible, intenso y listo para retos más atrevidos.<br>"Cuando uno no basta... que el placer sea doble."</p>
          </div>
        </div>
      `;
    }

    // Mostrar login empleados
    function mostrarLoginVIP() {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="panel">
          <h2>Acceso Empleados</h2>
          <label for="nombreInput">Nombre (minúsculas):</label>
          <input type="text" id="nombreInput" placeholder="ejemplo: tito" />
          <label for="apellidoInput">Apellido (minúsculas):</label>
          <input type="text" id="apellidoInput" placeholder="ejemplo: giovanni" />
          <button class="btn" onclick="verificarAccesoVIP()">Entrar</button>
          <p id="errorLogin" style="color:#ff5a5a; margin-top:1rem;"></p>
        </div>
      `;
    }

    // Verificar login
    function verificarAccesoVIP() {
      const nombre = document.getElementById('nombreInput')?.value.trim().toLowerCase();
      const apellido = document.getElementById('apellidoInput')?.value.trim().toLowerCase();
      const completo = nombre + ' ' + apellido;
      if (empleados.includes(completo)) {
        mostrarPanelEmpleado(completo);
      } else {
        document.getElementById('errorLogin').textContent = 'Acceso denegado. Usuario no registrado.';
      }
    }

    // Mostrar panel empleado con fichaje y ventas
    let fichandoInterval = null;
    function mostrarPanelEmpleado(nombreCompleto) {
      const contenido = document.getElementById('contenido');
      contenido.innerHTML = `
        <div class="panel">
          <h2>Panel de Fichaje - ${nombreCompleto}</h2>
          <button class="btn" onclick="fichar('${nombreCompleto}')">Fichar Entrada</button>
          <button class="btn" onclick="desfichar('${nombreCompleto}')">Fichar Salida</button>
          <button class="btn btn-red" onclick="cerrarSesion()">Cerrar Sesión</button>
          <h3>Tiempo trabajado hoy: <span id="tiempoTrabajado">00:00:00</span></h3>
          <h3>Horas trabajadas esta semana: <span id="tiempoSemana">00:00:00</span></h3>
          <h3>Horas totales acumuladas: <span id="tiempoTotal">00:00:00</span></h3>
          <h3>Ventas registradas</h3>
          <div id="ventasRegistradas"></div>
        </div>
      `;

      if(!fichajes[nombreCompleto]) {
        fichajes[nombreCompleto] = {
          fichado: false,
          inicio: null,
          tiempoAcumuladoDia: 0,
          tiempoAcumuladoSemana: 0,
          tiempoAcumuladoTotal: 0,
          ultimoDiaGuardado: null,
          ultimoSemanaGuardada: null
        };
      }
      actualizarTemporizadores(nombreCompleto);
      mostrarVentas();

      // Si está fichado, arrancar contador
      if (fichajes[nombreCompleto].fichado) {
        iniciarContador(nombreCompleto);
      }
    }

    function segundosATiempo(segundos) {
      const h = Math.floor(segundos / 3600).toString().padStart(2, '0');
      const m = Math.floor((segundos % 3600) / 60).toString().padStart(2, '0');
      const s = Math.floor(segundos % 60).toString().padStart(2, '0');
      return `${h}:${m}:${s}`;
    }

    function actualizarTemporizadores(nombreCompleto) {
      const ficha = fichajes[nombreCompleto];
      if (!ficha) return;

      const ahora = Date.now();
      const fecha = new Date();

      // Reiniciar acumulados si es nuevo día
      if (ficha.ultimoDiaGuardado !== fecha.toDateString()) {
        ficha.tiempoAcumuladoDia = 0;
        ficha.ultimoDiaGuardado = fecha.toDateString();
      }
      // Reiniciar acumulados si es nueva semana (usamos número de semana ISO)
      const semanaActual = getNumeroSemana(fecha);
      if (ficha.ultimoSemanaGuardada !== semanaActual) {
        ficha.tiempoAcumuladoSemana = 0;
        ficha.ultimoSemanaGuardada = semanaActual;
      }

      let tiempoDia = ficha.tiempoAcumuladoDia;
      let tiempoSemana = ficha.tiempoAcumuladoSemana;
      let tiempoTotal = ficha.tiempoAcumuladoTotal;

      if (ficha.fichado && ficha.inicio) {
        const dif = Math.floor((ahora - ficha.inicio) / 1000);
        tiempoDia += dif;
        tiempoSemana += dif;
        tiempoTotal += dif;
      }

      document.getElementById('tiempoTrabajado').textContent = segundosATiempo(tiempoDia);
      document.getElementById('tiempoSemana').textContent = segundosATiempo(tiempoSemana);
      document.getElementById('tiempoTotal').textContent = segundosATiempo(tiempoTotal);
    }

    function iniciarContador(nombreCompleto) {
      if (fichandoInterval) clearInterval(fichandoInterval);
      fichandoInterval = setInterval(() => {
        actualizarTemporizadores(nombreCompleto);
      }, 1000);
    }

    function fichar(nombreCompleto) {
      const ficha = fichajes[nombreCompleto];
      if (ficha && !ficha.fichado) {
        ficha.fichado = true;
        ficha.inicio = Date.now();
        guardarFichajes();
        iniciarContador(nombreCompleto);
      }
    }

    function desfichar(nombreCompleto) {
      const ficha = fichajes[nombreCompleto];
      if (ficha && ficha.fichado) {
        ficha.fichado = false;
        const ahora = Date.now();
        const tiempoSegundos = Math.floor((ahora - ficha.inicio) / 1000);
        ficha.tiempoAcumuladoDia += tiempoSegundos;
        ficha.tiempoAcumuladoSemana += tiempoSegundos;
        ficha.tiempoAcumuladoTotal += tiempoSegundos;
        ficha.inicio = null;
        guardarFichajes();
        if (fichandoInterval) {
          clearInterval(fichandoInterval);
          fichandoInterval = null;
        }
        actualizarTemporizadores(nombreCompleto);
      }
    }

    function cerrarSesion() {
      mostrarInicio();
    }

    // Productos para ventas
    const productosVentas = {
      "tito dios griego": "Tito Dios Griego",
      "la tita": "La Tita",
      "mascara dominante": "Máscara Dominante “Cat Vanilla”",
      "pinzas led sweet pain": "Pinzas LED “Sweet Pain”",
      "condones espadas del deseo": "Preservativos “Espadas del Deseo”",
      "dildo doble fusion morada": "Dildo Doble “Fusión Morada”",
      "banana pelada": "Banana Pelada",
      "magdalenas con glaseado rosa": "Magdalenas con Glaseado Rosa",
      "berenjena rellena": "Berenjena Rellena",
      "coctel dulce": "Cóctel Dulce",
      "trago afrutado": "Trago Afrutado",
      "almejas picantes": "Almejas Picantes"
    };

    // Mostrar ventas y registro de ventas
    function mostrarVentas() {
      const contenedor = document.getElementById('ventasRegistradas');
      if (!contenedor) return;

      let html = '<h4>Registrar ventas de productos</h4>';
      html += '<div style="display:flex; flex-wrap:wrap; gap:1rem; justify-content:center;">';

      for (const key in productosVentas) {
        html += `
          <div style="background: rgba(107,33,168,0.7); padding: 0.75rem; border-radius: 10px; min-width: 150px; text-align:center; box-shadow: 0 0 10px rgba(107,33,168,0.5);">
            <p style="font-weight:600; margin-bottom:0.25rem;">${productosVentas[key]}</p>
            <button class="btn" onclick="sumarVenta('${key}')">+1 Venta</button>
            <p style="margin-top:0.5rem;">Total: ${ventas[key] || 0}</p>
          </div>
        `;
      }

      html += '</div>';
      contenedor.innerHTML = html;
    }

    function sumarVenta(key) {
      if (!ventas[key]) ventas[key] = 0;
      ventas[key]++;
      guardarVentas();
      mostrarVentas();
    }

    // Número de semana ISO
    function getNumeroSemana(fecha) {
      const date = new Date(fecha.getTime());
      date.setHours(0, 0, 0, 0);
      date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));
      const week1 = new Date(date.getFullYear(), 0, 4);
      return 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000 - 3 + ((week1.getDay() + 6) % 7)) / 7);
    }

    // Al cargar la página
    window.onload = () => {
      mostrarInicio();
    };
  </script>

</body>
</html>
